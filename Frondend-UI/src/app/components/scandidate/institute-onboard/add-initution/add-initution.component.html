<app-navbar>
<div class="pt-8 lg:pl-64 pl-12 md:pl-48 bg-white">
<form  class="login-form" [formGroup]="instituteForm">
    <div class="bg-red-100 border border-red-400 text-red-700 py-3 mb-4 rounded relative" role="alert" *ngIf="error">
        <strong class="font-bold mr-4">Error ::</strong>
        <span class="block sm:inline">{{error}}</span>
        <span class="absolute top-0 bottom-0 right-0 px-4 py-3" (click)="close()">
          <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
        </span>
      </div>
    <h1 class="hd-add">Add Institution</h1>
    <div class="flex flex-wrap">
        <div class="w-full md:w-1/2 sm:w-full">
            <mat-form-field>
                <mat-label>Institute Name</mat-label>
                <input  matInput type="text" formControlName="instituteName"  required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('instituteName').errors?.required">
                   Required Institution Name.
                  </mat-error>
                  <mat-error *ngIf ="instituteForm.get('instituteName').errors?.minlength">
                    Institution name must be at least 3 characters long.
                   </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Contact Person Name</mat-label>
                <input  matInput   type="text"  formControlName="contactPersonName"  required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('contactPersonName').errors?.required">
                    Required contact person name.
                   </mat-error>
                <mat-error *ngIf ="instituteForm.get('contactPersonName').errors?.minlength">
                    Contact Person name must be at least 5 characters long.
                   </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <input  matInput   type="text"  formControlName="instituteAddress" required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('instituteAddress').errors?.required">
                    Required institute address.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Location(City/Town)</mat-label>
                <input  matInput   type="text"  formControlName="instituteLocation"  required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('instituteLocation').errors?.required">
                    Required institute location.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>State</mat-label>
                <input  matInput   type="text"  formControlName="state"  required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('state').errors?.required">
                    Required state.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Postal Code</mat-label>
                <input  matInput  formControlName="instituteZIP"  required  minLength="5" maxLength="7" class="br-btm input-w" pattern="^[0-9]{5,7}$" autoComplete='off'>
                <mat-error *ngIf="instituteForm.controls['instituteZIP'].hasError('required')">
                    Please enter
                    <strong>valid zipcode</strong>
                </mat-error>
                <mat-error *ngIf="instituteForm.controls['instituteZIP'].hasError('pattern')">
                    zip code
                    <strong>minimum length is 5 and maximum length is 7.</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Description</mat-label>
                <textarea  matInput formControlName="instituteDescription" class="br-btm input-w" autoComplete='off'></textarea>
            </mat-form-field>

            <div class="group-gap">
              <div class="avatar-upload">
                  <div class="avatar-edit">
                      <input type='file'  required id="imageUpload" accept=".png,.jpeg"   #logoLink (change)="uploadFile($event.target.files)" />
                  </div>
                  <div class="avatar-preview">
                      <div id="imagePreview" [style.backgroundImage]="'url('+ imageUrl +')'"></div>
                  </div>
              </div>
              <button mat-button  (click)="logoLink.click()">
                  <mat-icon>file_upload</mat-icon>
                   Upload Logo
              </button>
          </div>
        </div>
        <div class="w-full md:w-1/2 sm:w-full">
            <mat-form-field>
                <mat-label>Code</mat-label>
                <input  matInput type="text" formControlName="code"    class="br-btm input-w" autoComplete='off'>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Phone Number</mat-label>
                <input  matInput   type="text"  formControlName="contact"  required  class="br-btm input-w" autoComplete='off' pattern="^[0-9]{10}$" >
                <mat-error *ngIf ="instituteForm.get('contact').errors?.required">
                    Required phone number.
                </mat-error>
                <mat-error *ngIf="!instituteForm.get('contact').errors?.required && instituteForm.get('contact').errors?.pattern">
                    Please enter valid mumber
                   </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Email</mat-label>
                <input  matInput  type="text"  formControlName="instituteEmail"  required  class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('instituteEmail').errors?.required">
                    Required email address.
                </mat-error>
                <mat-error *ngIf ="instituteForm.get('instituteEmail').errors?.email">
                    Enter a valid email address.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Institution type</mat-label>
                <input  matInput   type="text"  formControlName="instituteType" required   class="br-btm input-w" autoComplete='off'>
                <mat-error *ngIf ="instituteForm.get('instituteType').errors?.required">
                    Required institute type.
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Student size</mat-label>
                <input  matInput   type="text"  formControlName="instituteStudentSize"    class="br-btm input-w" autoComplete='off'>
            </mat-form-field>
            <mat-form-field>
              <mat-label>Active From</mat-label>
              <!-- <input  matInput  type="text"  formControlName="activeform"  required  class="br-btm input-w" autoComplete='off'> -->
              <input matInput [matDatepicker]="picker2" [min]="minDate"
              [max]="maxDate" formControlName="instituteActiveFrom"  class="br-btm input-w" required>
              <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2 color="primary"></mat-datepicker>
              <mat-error *ngIf ="instituteForm.get('instituteActiveFrom').errors?.required">
                Choose date.
            </mat-error>
          </mat-form-field>
            <!--<mat-form-field>
                <mat-label>Course Offered</mat-label>
                <mat-select [formControl]="toppings" multiple class="br-btm input-w">
                  <mat-option *ngFor="let topping of toppingList" [value]="topping">{{topping}}</mat-option>
                </mat-select>
            </mat-form-field>-->
            <mat-form-field *ngIf ="id">
              <mat-label>Status</mat-label>
              <mat-select class="br-btm input-w" formControlName="status">
                <mat-option  [value]= true>Active</mat-option>
                <mat-option  [value]= false>Inactive</mat-option>
              </mat-select>
          </mat-form-field>
        </div>
    </div>
    <div class="flex justify-end lg:pb-6 lg:pr-48">
      <a routerLink="/inistution-list"><button class="lg-button focus:outline-none focus:shadow-outline mr-12" type="button">
        Cancel
      </button></a>
      <button class="lg-button focus:outline-none focus:shadow-outline" type="submit" (click)=submit() *ngIf="!id" >
        Submit
      </button>
      <button class="lg-button focus:outline-none focus:shadow-outline" (click)=update(id) *ngIf="id" >
          update
        </button>
    </div>
</form>
</div>
</app-navbar>
